<html>
	<head>
		<title>Vue Blocks Framework</title>
		<link  href="//unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- <script src="//unpkg.com/vue-blocks/dist/vue-blocks.js"></script> -->

		<script src="../dist/vue-blocks.js"></script>
	</head>
	<body>

		<div class="container">
			<header>
				<h1>Vue blocks</h1>
			</header>
			<!-- app mount point -->
			<app></app>
		</div>

		<template module="snippets">
			<script>
			module.exports = {
				'one': `<template component="app">
	<div class="container">
		<nav>
			<my-navigation></my-navigation>
		</nav>
		<router-view></router-view>
	</div>
</template>

<!-- reusable components -->
<template component="my-navigation">
	<div class="navigation">
		<router-link to="/">Home</router-link>
		<router-link to="/page1">Page 1</router-link>
		<router-link to="/page2/with-param">Page 2</router-link>
	</div>
</template>`,
				


				'two':`<!-- homepage -->
<template url="/">
	<div>Welcome to my awesome app</div>
</template>

<!-- simple route -->
<template url="/page1">
	<div>Page 1</div>
</template>

<!-- route with params -->
<template url="/page2/:param">
	<div>Page 2: Param {{$route.params.param}}</div>
</template>`,
				



				'three': `
<template component="full-component-example">
	<div class="full-component-example">
		<div>This is the html template for this tag, and may contain any html and vue code.</div>
		<div>A vue value: {{some_vue_value}}</div>
		<div>A simple counter: {{counter}} <button @click="addOneToCounter()">Add one to counter</button>
		</div>
	</div>	

	<script>
	// Write your vue component object like usual.
	export default {	
		data() {
			return {
				some_vue_value: 'value1',
				counter: 0
			}
		},
		mounted() {
			console.log("Component is ready")
		},
		methods: {
			addOneToCounter() {
				this.counter += 1;
			}
		}
	}
	</${'script'}>
</template>
`


				,'component_tag': `<template component="my-component" props="prop1,prop2">
  <div>
    <p>Template for my-component</p>
  </div>
  <script>
  export default() {
    data() {
      return {
        value: ''
      }
    },
    mounted() {
      // ..
    },
    methods: {
      myMethod() {
        //..
      }
    }
  }
  </${'script'}>
</template>
`
				,'component_source': `Vue.component('my-component', {
  name: 'my-component',
  template: \`<div>
    <p>Template for my-component</p>
  </div>\`,
  props: ['prop1','prop2'],
  data() {
    return {
      value: ''
    }
  },
  mounted() {
    // ..
  },
  methods: {
    myMethod() {
      //..
    }
  }  
})
`
				,'url_tag': `<template url="/my-url">
  <div>
    <p>Template for my-url</p>
  </div>
  <script>
  export default {
    data() {
      return {
        value: ''
      }
    },
    mounted() {
      // ..
    },
    methods: {
      myMethod() {
        //..
      }
    }    
  }
  </${'script'}>
</template>`
		
				,'url_source' : `var router = new VueRouter({
  routes: [
    {
      path: '/my-url',
      component: {
        name: 'url-handler--my-url'
        template: \`<div>
          <p>Template for my-url</p>
        </div>\`,
        data() {
          return {
            value: ''
          }
        },
        mounted() {
          // ..
        },
        methods: {
          myMethod() {
            //..
          }
        }  
      }
    }
  ]
})

var rootInstance = new Vue({
  router: router
}).$mount('app')
				`




			}
			</script>
		</template>
	
		<template component="app">
			<div class="appp">
				<nav>
				<ul class="nav nav-tabs">
					<li class=""><router-link to="/">Start</router-link></li>
					<li class=""><router-link to="/try-it">Try it!</router-link></li>
					<li class=""><a href="nested-routes.html" target="_blank">Nested routes</a></li>
					<li class=""><a href="inter-component-communication.html" target="_blank">Component communication</a></li>
				</ul>
				</nav>

				<router-view></router-view>
			</div>

		</template>

		<template url="/">
			<div>
				<h2>The short story</h2>
				<p>
					 Vue blocks allow you to easily build 
					 a single page application using simple
					 building blocks:
				</p>

				<p>
				1. Define components<br>
				<pre>{{snippets.one}}</pre>
				</p>

				<p>
				2. Define your routes<br>
				<pre>{{snippets.two}}</pre>
				</p>

				<p>3. Build the future web!
				</p>




				<h2>Components</h2>

				<p>Each component is defined inside a &lt;template component&gt; tag. Inside this tag you may write html and a script-tag containing the component code. 

				<pre>{{snippets.three}}</pre>


				</p>

				<h2>In other words:</h2>

				<table class="table">
					<tr>
						<td style="width:40%">
							<pre>{{snippets.component_tag}}</pre>
						</td>
						<td style="text-align:center;vertical-align:middle;font-size:40px;">
							&#8594;
						</td>
						<td style="width:40%">
							<pre>{{snippets.component_source}}</pre>
						</td>
					</tr>

					<tr>
						<td style="width:40%">
							<pre>{{snippets.url_tag}}</pre>
						</td>
						<td style="text-align:center;vertical-align:middle;font-size:40px;">
							&#8594;
						</td>
						<td style="width:40%">
							<pre>{{snippets.url_source}}</pre>
						</td>
					</tr>

				</table>



				<h2>Why?</h2>
				<p>Vue blocks was developed to quickly build single page prototypes.</p>

				<h2>What's in it?</h2>
				<ul>
					<li>Vue 2.6.11</li>
					<li>Vue Router 2.8.1</li>
				</ul>

				<h2>Undocumented subjects</h2>
				<p><ul>
				<li>template component props attribute</li>
				<li>Working with route params</li>
				</ul>
				</p>
			</div>
			<script>
			var snippets = require('snippets');

			export default {
				mounted() {
					
				},
				data() {
					return {
						snippets: snippets
					}
				}
			}
			</script>
		</template>


		<template url="/try-it">
			<div>
				<div class="row">
					<div class="col-sm-6">
						<textarea v-model="source" debounce="500" style="width:100%;height:100%;">

						</textarea>	
					</div>
					<div class="col-sm-6" style="height:100%;">
						<code-preview :code="html"></code-preview>	
					</div>
				</div>
				

				
			</div>
			<script>
			var snippets = require('snippets');
			var header = '<app></app>' + "\n\n";

			export default {
				data() {
					return {
						source: header + snippets.one + "\n\n" + snippets.two,
					}
				},
				computed: {
					html() {
						return this.source
					}
				}
			}
			</script>
		</template>

		<template component="code-preview">
			<div style="display: block; width:100%; height:100%;">  
				<iframe :src="iframeSource" style="display: block; width:100%; height:800px;"></iframe> 
				<!-- <pre>{{code | json }}</pre> -->
			</div>
			<script>
			export default {
				props: {
					"code" : {
						type: String,
						required:true
					}
				},
				computed: {
					template() {
						var code = this.code;
						var path_to_vue_blocks = location.toString().split('#')[0] + '../dist/vue-blocks.js'
						var protocol = location.protocol || 'https:';

						return `<html>
<head>
	<link  href="${protocol}//unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="${path_to_vue_blocks}"></${'script'}>		
	<style>body { padding: 20px; }</style>
</head>
<body>
	<!-- preview: html -->
	${code}
</body>
</html>`;
					}, 

					mounted() {

					},

					iframeSource() {
						var dataUrl  = "data:text/html;charset=utf-8,";
						var template = this.template;		

						return dataUrl + escape(template);
					}
				},
			}
			</script>
		</template>


	</body>
</html>
